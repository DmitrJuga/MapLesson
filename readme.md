geekbrains.ru, Objective-C level 2 course
#"Карта"

## Lesson 4 - homework
####ДЗ: Доделать карту. Создать два окна с картой, при этом сбор адресов посредством лонгпресс реализуется в одном окне, а вывод значений на карту делается при переходе во второе окно. При этом получившийся массив адресов необходимо хранить в Синглтоне и вызывать его оттуда же. Непосредственное добавления адреса необходимо реализовать посредством использования блока с передачей аргументов (адрес/индекс/город/координаты) в другой метод.

Выполнено.

Особенности:
- реализовано не два окна с картой, а одно окно с картой (MapView), а другое со списом (TableView); окна объедены в TabBarController (соответственно переключение окон - через иконуи в таб-баре);
- общий массив для обоих окон - в классе DDUModel, который предоставляет синглтон;
- добавление данных в массив реализуется методом addToArrayPointFromLocation:withData: в который передаётся текущая локация и блок кода для формирования элемента массива (блок принимает параметры: улица/город/индекс/координаты);
- при выборе элемента в списке (при нажатии на ячейке таблицы) происходит переключение на окно с картой и фокус перемещается на соотстветствующую аннотацию (как и в предыдущем варианте с одним окном); реализовано с помощью отправки и обработки нотификации из окна таблицы в окно карты;
- при переключение окон происходит обновление данных;
- все остальные особенности - согласно описания реализации предыдущего ДЗ

вот как-то так...


## Lesson 3 - homework
####ДЗ:
Реализовать TableView поверх MapView. По ЛонгПресс добавлять адрес точки касания в массив. При нажатии на кнопку перезагружать таблицу и добовлять аннотации на карту. При нажатии на табличную ячейку должен происходить фокус на конкретную аннотацию.

Выполнено.

Особенности:
- авторизация сделана иначе, чем на уроке: 1 - проще (проверки на первый вызов не нужны), 2 - WhenInUse вместо Always (экономим пользователю батарейку);
- обновление локации запускаем только если есть авторизация;
- обновление локации делаем один раз и отключаем (экономим пользователю батарейку); повторно обновить положение можно по кнопке "Очистить" (корзина);
- если авторизация уже есть - сразу масштабируемся на пользовательскую локацию, а не заставляем юзера ждать, пока отрендерится ВСЯ ЗЕМЛЯ, а потом лишь его локация (как бы красиво анимация приближения не смотрелсь);
- точки запоминаются по LongPress-жесту (по условию ДЗ аннотации и записи в таблице сразу не появляются, лишь выводим Alert о том, что точка добавлена);
- по кнопке "Обновить" (круглая стрелка) на карту добавляются аннотации, карта масштабируется так, чтобы все аннотации попали на экран(!!!), загружается/обновляется список в таблице;
- адрес выводм в формате: "Улица дом /n почтовый индекс, Город" ... если по выбранной точке отстутвует название улицы - выводим название объекта (парки, водоёмы и т.п.); если отстутвует название города - страну, отсутствует индекс - "xxxxxx";
- при нажатии на аннотации, фокус перемещается на соотстветствующую аннотацию (ставится по центру, открывается Callout View с адресом), текущий масштаб НЕ меняется;
- при нажатии на ячейке таблицы, фокус перемещается на соотстветствующую аннотацию (ставится по центру, открывается Callout View с адресом), масштаб меняется на дефолтовый (700 метров);
- по кнопке "Очистить" (корзина) - таблица очищается, все аннотации удаляются с карты, форсируется обновление текущего положения (фокус перемещается на текущее положение, масштаб меняется на дефолтовый - 700 метров);

вроде всё...

:)
